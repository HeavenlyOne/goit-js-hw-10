{"mappings":"C,A,WCwBA,IAAM,EAAO,SAAS,aAAa,CAAC,YAC9B,EAAW,SAAS,aAAa,CAAC,YAClC,EAAS,SAAS,aAAa,CAAC,aAClC,EAAc,EAMZ,EAAW,IAAI,qBAAqB,EAL1B,CACd,KAAM,KACN,WAAY,OACZ,UAAW,CACb,GAKA,SAAS,IAEL,EADA,GAAe,GAEV,IAAI,CAAC,SAAA,CADV,EAEQ,EAAK,kBAAkB,CAAC,YAAa,EAAa,EAAK,OAAO,GAE1D,EAAK,IAAI,GAAK,EAAK,WAAW,EAC9B,CAAA,EAAS,MAAM,CAAG,CAAA,CADtB,CAGR,GACC,KAAK,CAAC,SAAA,CADP,EACc,OAAA,QAAQ,GAAG,CAAC,E,EAC9B,CAEA,SAAS,IAAY,IAAA,EAAA,UAAA,MAAA,CAAA,GAAA,AAAA,KAAA,IAAA,SAAA,CAAA,EAAA,CAAA,SAAA,CAAA,EAAA,CAAK,EACtB,OAAO,MAAM,GAAc,MAAA,CA/Bd,iCA+BkC,MAAA,CA9BlC,qBA8BuB,aAA2B,MAAA,CA7BnD,aA6B2C,UAAa,MAAA,CAAL,IAAQ,IAAI,CAAC,SAAA,CAA5E,EACI,GAAI,CAAC,EAAK,EAAE,CACR,MAAM,AAAI,MAAM,EAAK,UAAU,EAEnC,OAAO,EAAK,IAAI,EACpB,EACJ,CAYA,SAAS,EAAa,CAAG,EACrB,OAAO,EAAI,GAAG,CAAC,SAAf,CAAA,EAAkB,EAAA,WAAA,CAAa,EAAA,KAAb,AAKlB,GAAG,IAAI,CAAC,GACZ,CAEA,SAAS,EAAO,CAAO,CAAE,CAAQ,EAC7B,EAAQ,OAAO,CAAC,SAAA,CAAhB,EACQ,EAAM,cAAc,EAEpB,EADA,GAAe,GAEd,IAAI,CAAC,SAAA,CADN,EAEI,EAAK,kBAAkB,CAAC,YAAa,EAAa,EAAK,OAAO,GAC1D,EAAK,IAAI,GAAK,EAAK,WAAW,EAC9B,EAAS,SAAS,CAAC,EAE3B,GAEC,KAAK,CAAC,SAAA,CAFP,EAEc,OAAA,QAAQ,GAAG,CAAC,E,EAElC,EACJ,CA1DA,EAAS,gBAAgB,CAAC,QAAS,GAwBnC,IACA,KAAK,SAAA,CAAL,EACI,EAAK,kBAAkB,CAAC,YAAa,EAAa,EAAK,OAAO,GAC9D,EAAS,OAAO,CAAC,GACb,EAAK,IAAI,GAAK,EAAK,WAAW,EAC9B,CAAA,EAAS,MAAM,CAAG,CAAA,CADtB,CAGJ,GACK,KAAK,CAAC,SAAA,CADX,EACkB,OAAA,QAAQ,GAAG,CAAC,E,E","sources":["<anon>","src/js/risich-2.js"],"sourcesContent":["(function () {\nvar $b5cd64cb04a5dd38$exports = {};\n// const BASE_URL = \"https://the-one-api/v2/\";\n// const END_POINT = \"character\";\n// const KEY = 'somebearerkey';\n// function getCharacter() {\n//     const param = new URLSearchParams({\n//         limit: 30,\n//         page: 1,\n//     });\n//     const option = {\n//         method: 'GET',\n//         headers: {\n//             Authorization: `Bearer ${KEY}`\n//         }\n//     }\n//     fetch(`${BASE_URL}${END_POINT}?${param}`, option)\n//         .then(resp => console.log(resp))\n// }\nvar $b5cd64cb04a5dd38$var$BASE_URL = \"https://api.themoviedb.org/3/\";\nvar $b5cd64cb04a5dd38$var$ENDPOINT = 'trending/movie/day';\nvar $b5cd64cb04a5dd38$var$API_KEY = 'someapikey';\nvar $b5cd64cb04a5dd38$var$URL_POSTERS = 'https://image.tmdb.org/t/p/w500';\nvar $b5cd64cb04a5dd38$var$list = document.querySelector('.js-list');\nvar $b5cd64cb04a5dd38$var$loadMore = document.querySelector('.js-load');\nvar $b5cd64cb04a5dd38$var$target = document.querySelector('.js-guard');\nvar $b5cd64cb04a5dd38$var$currentPage = 1;\nvar $b5cd64cb04a5dd38$var$options = {\n    root: null,\n    rootMargin: \"30px\",\n    threshold: 1.0\n};\nvar $b5cd64cb04a5dd38$var$observer = new IntersectionObserver($b5cd64cb04a5dd38$var$onLoad, $b5cd64cb04a5dd38$var$options);\n$b5cd64cb04a5dd38$var$loadMore.addEventListener('click', $b5cd64cb04a5dd38$var$onLoad);\nfunction $b5cd64cb04a5dd38$var$onLoad() {\n    $b5cd64cb04a5dd38$var$currentPage += 1;\n    $b5cd64cb04a5dd38$var$getTrending($b5cd64cb04a5dd38$var$currentPage).then(function(data) {\n        $b5cd64cb04a5dd38$var$list.insertAdjacentHTML('beforeend', $b5cd64cb04a5dd38$var$createMarkup(data.results));\n        if (data.page === data.total_pages) $b5cd64cb04a5dd38$var$loadMore.hidden = true;\n    }).catch(function(err) {\n        return console.log(err);\n    });\n}\nfunction $b5cd64cb04a5dd38$var$getTrending() {\n    var page = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 1;\n    return fetch(\"\".concat($b5cd64cb04a5dd38$var$BASE_URL).concat($b5cd64cb04a5dd38$var$ENDPOINT, \"?api_key=\").concat($b5cd64cb04a5dd38$var$API_KEY, \"&page=\").concat(page)).then(function(resp) {\n        if (!resp.ok) throw new Error(resp.statusText);\n        return resp.json();\n    });\n}\n$b5cd64cb04a5dd38$var$getTrending();\nthen(function(data) {\n    $b5cd64cb04a5dd38$var$list.insertAdjacentHTML('beforeend', $b5cd64cb04a5dd38$var$createMarkup(data.results));\n    $b5cd64cb04a5dd38$var$observer.observe($b5cd64cb04a5dd38$var$target);\n    if (data.page !== data.total_pages) $b5cd64cb04a5dd38$var$loadMore.hidden = false;\n}).catch(function(err) {\n    return console.log(err);\n});\nfunction $b5cd64cb04a5dd38$var$createMarkup(arr) {\n    return arr.map(function(param) {\n        var poster_path = param.poster_path, title = param.title;\n    }).join('');\n}\nfunction $b5cd64cb04a5dd38$var$onLoad(entries, observer) {\n    entries.forEach(function(entry) {\n        if (entry.isIntersecting) {\n            $b5cd64cb04a5dd38$var$currentPage += 1;\n            $b5cd64cb04a5dd38$var$getTrending($b5cd64cb04a5dd38$var$currentPage).then(function(data) {\n                $b5cd64cb04a5dd38$var$list.insertAdjacentHTML('beforeend', $b5cd64cb04a5dd38$var$createMarkup(data.results));\n                if (data.page === data.total_pages) observer.unobserve($b5cd64cb04a5dd38$var$target);\n            }).catch(function(err) {\n                return console.log(err);\n            });\n        }\n    });\n}\n\n})();\n//# sourceMappingURL=risich-2.984e5768.js.map\n","// const BASE_URL = \"https://the-one-api/v2/\";\n// const END_POINT = \"character\";\n// const KEY = 'somebearerkey';\n\n// function getCharacter() {\n//     const param = new URLSearchParams({\n//         limit: 30,\n//         page: 1,\n//     });\n//     const option = {\n//         method: 'GET',\n//         headers: {\n//             Authorization: `Bearer ${KEY}`\n//         }\n//     }\n\n//     fetch(`${BASE_URL}${END_POINT}?${param}`, option)\n//         .then(resp => console.log(resp))\n// }\n\nconst BASE_URL = \"https://api.themoviedb.org/3/\";\nconst ENDPOINT = 'trending/movie/day';\nconst API_KEY = 'someapikey';\nconst URL_POSTERS = 'https://image.tmdb.org/t/p/w500'\nconst list = document.querySelector('.js-list');\nconst loadMore = document.querySelector('.js-load');\nconst target = document.querySelector('.js-guard');\nlet currentPage = 1;\nconst options = {\n  root: null,\n  rootMargin: \"30px\",\n  threshold: 1.0,\n};\nconst observer = new IntersectionObserver(onLoad, options);\n\nloadMore.addEventListener('click', onLoad);\n\nfunction onLoad() {\n    currentPage += 1;\n    getTrending(currentPage)\n        .then(data => {\n            list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n            \n            if (data.page === data.total_pages) {\n                loadMore.hidden = true;\n            }\n    })\n    .catch(err => console.log(err));\n};\n\nfunction getTrending(page=1) {\n    return fetch(`${BASE_URL}${ENDPOINT}?api_key=${API_KEY}&page=${page}`).then(resp => {\n        if (!resp.ok) {\n            throw new Error(resp.statusText);\n        }\n        return resp.json();\n    });\n};\n\ngetTrending()\nthen(data => {\n    list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n    observer.observe(target);\n    if (data.page !== data.total_pages) {\n        loadMore.hidden = false;\n    }\n})\n    .catch(err => console.log(err));\n\nfunction createMarkup(arr) {\n    return arr.map(({ poster_path, title }) => {\n        `<li>\n            <img src=\"${URL_POSTERS}${poster_path}\" alt=\"${title}\">\n            <h2>${title}</h2>\n        </li>`\n    }).join('')\n};\n\nfunction onLoad(entries, observer) {\n    entries.forEach(entry => {\n        if (entry.isIntersecting) {\n            currentPage += 1;\n            getTrending(currentPage)\n            .then(data => {\n                list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n                if (data.page === data.total_pages) {\n                    observer.unobserve(target)\n                }\n            }\n    )\n            .catch(err => console.log(err));\n        }\n    });\n}\n\n"],"names":["$b5cd64cb04a5dd38$var$list","document","querySelector","$b5cd64cb04a5dd38$var$loadMore","$b5cd64cb04a5dd38$var$target","$b5cd64cb04a5dd38$var$currentPage","$b5cd64cb04a5dd38$var$observer","IntersectionObserver","$b5cd64cb04a5dd38$var$onLoad","root","rootMargin","threshold","$b5cd64cb04a5dd38$var$getTrending","then","data","insertAdjacentHTML","$b5cd64cb04a5dd38$var$createMarkup","results","page","total_pages","hidden","catch","err","console","log","arguments","length","fetch","concat","resp","ok","Error","statusText","json","arr","map","param","poster_path","title","join","entries","observer","forEach","entry","isIntersecting","unobserve","addEventListener","observe"],"version":3,"file":"risich-2.984e5768.js.map"}